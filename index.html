<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renewable Energy City Simulator</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/animations.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <h1><i class="fas fa-leaf"></i> Renewable Energy City Simulator</h1>
            <div class="header-controls">
                <button id="tutorial-btn" class="btn btn-info">
                    <i class="fas fa-graduation-cap"></i> Tutorial
                </button>
                <!-- Budget planner removed -->
                <button id="reset-btn" class="btn btn-danger">
                    <i class="fas fa-refresh"></i> Reset
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Energy Sources Panel -->
            <aside class="energy-panel">
                <h3><i class="fas fa-bolt"></i> Energy Sources</h3>
                <div class="energy-sources">
                    <div class="energy-source" data-type="solar" draggable="true">
                        <div class="energy-icon">
                            <i class="fas fa-sun"></i>
                        </div>
                        <div class="energy-info">
                            <h4>Solar Panel</h4>
                            <p>Cost: $5,000</p>
                            <p>Output: 100kW</p>
                        </div>
                    </div>
                    
                    <div class="energy-source" data-type="wind" draggable="true">
                        <div class="energy-icon">
                            <i class="fas fa-fan"></i>
                        </div>
                        <div class="energy-info">
                            <h4>Wind Turbine</h4>
                            <p>Cost: $8,000</p>
                            <p>Output: 150kW</p>
                        </div>
                    </div>
                    
                    <div class="energy-source" data-type="hydro" draggable="true">
                        <div class="energy-icon">
                            <i class="fas fa-water"></i>
                        </div>
                        <div class="energy-info">
                            <h4>Hydro Power</h4>
                            <p>Cost: $12,000</p>
                            <p>Output: 200kW</p>
                        </div>
                    </div>
                    
                    <div class="energy-source" data-type="geothermal" draggable="true">
                        <div class="energy-icon">
                            <i class="fas fa-mountain"></i>
                        </div>
                        <div class="energy-info">
                            <h4>Geothermal</h4>
                            <p>Cost: $15,000</p>
                            <p>Output: 180kW</p>
                        </div>
                    </div>
                    
                    <div class="energy-source" data-type="biomass" draggable="true">
                        <div class="energy-icon">
                            <i class="fas fa-seedling"></i>
                        </div>
                        <div class="energy-info">
                            <h4>Biomass</h4>
                            <p>Cost: $10,000</p>
                            <p>Output: 120kW</p>
                        </div>
                    </div>

                    <div class="energy-source fossil-fuel" data-type="coal" draggable="true">
                        <div class="energy-icon">
                            <i class="fas fa-industry"></i>
                        </div>
                        <div class="energy-info">
                            <h4>Coal Plant</h4>
                            <p>Cost: $25,000</p>
                            <p>Output: 400kW</p>
                            <small class="environmental-warning">⚠️ High Emissions</small>
                        </div>
                    </div>

                    <div class="energy-source fossil-fuel" data-type="naturalgas" draggable="true">
                        <div class="energy-icon">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="energy-info">
                            <h4>Natural Gas</h4>
                            <p>Cost: $18,000</p>
                            <p>Output: 300kW</p>
                            <small class="environmental-warning">⚠️ Fossil Fuel</small>
                        </div>
                    </div>
                </div>

                <!-- Zone Legend -->
                <div class="zone-legend">
                    <h4>City Zones</h4>
                    <div class="legend-item">
                        <div class="zone-color residential"></div>
                        <span>Residential (50kW needed, $120/hr income)</span>
                    </div>
                    <div class="legend-item">
                        <div class="zone-color commercial"></div>
                        <span>Commercial (100kW needed, $250/hr income)</span>
                    </div>
                    <div class="legend-item">
                        <div class="zone-color industrial"></div>
                        <span>Industrial (200kW needed, $400/hr income)</span>
                    </div>

                    <h5 style="margin-top: 1rem; margin-bottom: 0.5rem; color: #4a90e2;">Specialized Terrain</h5>
                    <div class="legend-item">
                        <div class="zone-color forest"></div>
                        <span>Forest (+40% biomass)</span>
                    </div>
                    <div class="legend-item">
                        <div class="zone-color mountain"></div>
                        <span>Mountain (+50% geothermal, +30% wind)</span>
                    </div>
                    <div class="legend-item">
                        <div class="zone-color beach"></div>
                        <span>Beach (+35% wind, +25% solar)</span>
                    </div>
                    <div class="legend-item">
                        <div class="zone-color river"></div>
                        <span>River (+60% hydro)</span>
                    </div>
                </div>
            </aside>

            <!-- City Grid -->
            <main class="city-container">
                <div class="weather-display">
                    <div id="current-weather" class="weather-info">
                        <i class="fas fa-sun weather-icon"></i>
                        <span class="weather-text">Sunny</span>
                        <div class="weather-effects">
                            <span class="effect-text">Solar: +20%</span>
                        </div>
                    </div>
                </div>
                
                <div id="city-grid" class="city-grid">
                    <!-- Grid cells will be generated by JavaScript -->
                </div>
                
                <div class="grid-controls">
                    <button id="zone-mode" class="btn btn-primary active">
                        <i class="fas fa-city"></i> Zone Mode
                    </button>
                    <button id="energy-mode" class="btn btn-secondary">
                        <i class="fas fa-bolt"></i> Energy Mode
                    </button>
                    <select id="zone-selector">
                        <option value="residential">Residential</option>
                        <option value="commercial">Commercial</option>
                        <option value="industrial">Industrial</option>
                    </select>
                </div>
            </main>

            <!-- Dashboard -->
            <aside class="dashboard">
                <h3><i class="fas fa-chart-line"></i> City Dashboard</h3>
                
                <div class="dashboard-section">
                    <h4>Energy Overview</h4>
                    <div class="metric">
                        <span class="metric-label">Total Production:</span>
                        <span id="total-production" class="metric-value">0 kW</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Current Energy Production:</span>
                        <span id="current-production" class="metric-value">0 kW</span>
                        <span id="weather-impact" class="weather-impact">+0%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Total Consumption:</span>
                        <span id="total-consumption" class="metric-value">0 kW</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Efficiency:</span>
                        <span id="efficiency" class="metric-value">0%</span>
                    </div>
                </div>

                <div class="dashboard-section">
                    <h4>Financial</h4>
                    <div class="metric">
                        <span class="metric-label">Total Cost:</span>
                        <span id="total-cost" class="metric-value">$0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Annual Savings:</span>
                        <span id="annual-savings" class="metric-value">$0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">City Income:</span>
                        <span id="total-income" class="metric-value">$0/hr</span>
                    </div>
                </div>

                <div class="dashboard-section">
                    <h4>Environmental Impact</h4>
                    <div class="metric">
                        <span class="metric-label">CO₂ Reduction:</span>
                        <span id="co2-reduction" class="metric-value">0 tons/year</span>
                    </div>
                </div>

                <div class="dashboard-section sustainability-panel">
                    <h4>🌱 Sustainability Score</h4>
                    <div class="sustainability-header">
                        <div class="score-display">
                            <span id="sustainability-total" class="score-number">0</span>
                            <span class="score-max">/100</span>
                        </div>
                        <div class="grade-display">
                            <span id="sustainability-grade" class="grade-letter">D</span>
                            <span id="sustainability-description" class="grade-description">Getting Started</span>
                        </div>
                    </div>
                    
                    <div class="score-breakdown">
                        <div class="score-category" data-category="efficiency">
                            <div class="category-header">
                                <span class="category-name">⚡ Energy Efficiency</span>
                                <span class="category-score"><span id="efficiency-score">0</span>/25</span>
                            </div>
                            <div class="category-bar">
                                <div class="category-fill" id="efficiency-fill"></div>
                            </div>
                            <div class="category-description" id="efficiency-description">How well energy production meets demand</div>
                        </div>
                        
                        <div class="score-category" data-category="carbon">
                            <div class="category-header">
                                <span class="category-name">🌍 Carbon Impact</span>
                                <span class="category-score"><span id="carbon-score">0</span>/20</span>
                            </div>
                            <div class="category-bar">
                                <div class="category-fill" id="carbon-fill"></div>
                            </div>
                            <div class="category-description" id="carbon-description">Environmental benefit from renewable energy</div>
                        </div>
                        
                        <div class="score-category" data-category="diversity">
                            <div class="category-header">
                                <span class="category-name">🌈 Energy Diversity</span>
                                <span class="category-score"><span id="diversity-score">0</span>/20</span>
                            </div>
                            <div class="category-bar">
                                <div class="category-fill" id="diversity-fill"></div>
                            </div>
                            <div class="category-description" id="diversity-description">Variety of renewable energy sources</div>
                        </div>
                        
                        <div class="score-category" data-category="reliability">
                            <div class="category-header">
                                <span class="category-name">🔋 Grid Reliability</span>
                                <span class="category-score"><span id="reliability-score">0</span>/15</span>
                            </div>
                            <div class="category-bar">
                                <div class="category-fill" id="reliability-fill"></div>
                            </div>
                            <div class="category-description" id="reliability-description">Consistent power supply to all zones</div>
                        </div>
                        
                        <div class="score-category" data-category="innovation">
                            <div class="category-header">
                                <span class="category-name">🚀 Innovation</span>
                                <span class="category-score"><span id="innovation-score">0</span>/10</span>
                            </div>
                            <div class="category-bar">
                                <div class="category-fill" id="innovation-fill"></div>
                            </div>
                            <div class="category-description" id="innovation-description">Advanced renewable technologies</div>
                        </div>
                        
                        <div class="score-category" data-category="community">
                            <div class="category-header">
                                <span class="category-name">🏘️ Community</span>
                                <span class="category-score"><span id="community-score">0</span>/10</span>
                            </div>
                            <div class="category-bar">
                                <div class="category-fill" id="community-fill"></div>
                            </div>
                            <div class="category-description" id="community-description">Zones with full power coverage</div>
                        </div>
                    </div>
                    
                    <div class="achievements-section">
                        <h5>🏆 Achievements</h5>
                        <div id="achievements-list" class="achievements-list">
                            <span class="no-achievements">Build your city to unlock achievements!</span>
                        </div>
                    </div>
                </div>

                <div class="dashboard-section">
                    <h4>Energy Mix</h4>
                    <canvas id="energy-chart" width="200" height="200"></canvas>
                </div>

                <div class="dashboard-section">
                    <h4>Performance</h4>
                    <div class="performance-bar">
                        <div id="performance-fill" class="performance-fill"></div>
                        <span class="performance-text">City Performance</span>
                    </div>
                </div>
            </aside>
        </div>

        <!-- Tutorial Modal -->
        <div id="tutorial-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="tutorial-content">
                    <!-- Tutorial content will be loaded here -->
                </div>
                <div class="tutorial-navigation">
                    <button id="prev-tutorial" class="btn btn-secondary">Previous</button>
                    <span id="tutorial-progress">1 / 5</span>
                    <button id="next-tutorial" class="btn btn-primary">Next</button>
                </div>
            </div>
        </div>

        <!-- Info Modal -->
        <div id="info-modal" class="modal">
            <div class="modal-content">
                <span class="close">&times;</span>
                <div id="info-content">
                    <!-- Info content will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Include SVG icons -->
    <div style="display: none;">
        <div id="svg-icons"></div>
    </div>

    <!-- Scripts -->
    <script src="js/energySources.js?v=10"></script>
    <script src="js/cityZones.js?v=10"></script>
    <script src="js/weatherSystem.js?v=10"></script>
    <script src="js/dashboard.js?v=10"></script>
    <script src="js/dragDrop.js?v=10"></script>
    <!-- Budget planner script removed -->
    <script src="js/tutorial.js?v=10"></script>
    <script src="js/storage.js?v=10"></script>
    <script src="js/main.js?v=21"></script>
    
    <!-- Initialize simulator globally -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Make simulator globally accessible for bulk actions
            setTimeout(() => {
                window.simulator = window.renewableEnergySimulator;
            }, 1000);
        });
    </script>
</body>
</html>
